{"ast":null,"code":"export default {\n  props: {\n    cierreInfo: Object,\n    userData: {\n      type: Object,\n      default: () => ({\n        name: '-',\n        username: '-',\n        phone: '-'\n      })\n    },\n    hayTurnoPrevio: {\n      type: Boolean,\n      default: false\n    },\n    esTurnoPrevioMismoUsuario: {\n      type: Boolean,\n      default: false\n    },\n    turnoPrevioInfo: {\n      type: Object,\n      default: () => ({})\n    },\n    ventasTurno: {\n      type: Number,\n      default: 0\n    }\n  },\n  methods: {\n    formatNumber(value) {\n      if (value === null || value === undefined) return '-';\n      return Number(value).toLocaleString('es-MX', {\n        style: 'currency',\n        currency: 'MXN'\n      });\n    },\n    formatDate(dateString) {\n      if (!dateString) return '-';\n      const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      };\n      return new Date(dateString).toLocaleDateString('es-MX', options);\n    },\n    formatHora(fechaString) {\n      if (!fechaString) return '-';\n      const fecha = new Date(fechaString);\n      return fecha.toLocaleTimeString('es-MX', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    cerrarModal() {\n      console.log('Cerrando modal de resumen');\n      this.$emit('update:cierreInfo', null);\n    }\n  }\n};","map":{"version":3,"names":["props","cierreInfo","Object","userData","type","default","name","username","phone","hayTurnoPrevio","Boolean","esTurnoPrevioMismoUsuario","turnoPrevioInfo","ventasTurno","Number","methods","formatNumber","value","undefined","toLocaleString","style","currency","formatDate","dateString","options","year","month","day","hour","minute","Date","toLocaleDateString","formatHora","fechaString","fecha","toLocaleTimeString","cerrarModal","console","log","$emit"],"sources":["src/components/Caja/CierreInfo.vue"],"sourcesContent":["<template>\r\n<div class=\"modal is-active\" v-if=\"cierreInfo\">\r\n<div class=\"modal-background\" @click=\"cerrarModal\"></div>\r\n<div class=\"modal-card\">\r\n  <header class=\"modal-card-head\">\r\n    <p class=\"modal-card-title\">Resumen del Cierre de Caja</p>\r\n    <button class=\"delete\" aria-label=\"close\" @click=\"cerrarModal\"></button>\r\n  </header>\r\n  <section class=\"modal-card-body\">\r\n    <div class=\"content\">\r\n      <!-- Información general del cierre -->\r\n      <div class=\"box mb-4\">\r\n        <h4 class=\"has-text-centered mb-4\">Información General</h4>\r\n        <div class=\"columns is-multiline\">\r\n          <div class=\"column is-6\">\r\n            <p><strong>Fecha y hora:</strong> {{ formatDate(cierreInfo.date) }}</p>\r\n          </div>\r\n          <div class=\"column is-6\">\r\n            <p><strong>Usuario:</strong> {{ cierreInfo.user && cierreInfo.user.name ? cierreInfo.user.name : (userData ? userData.name : '-') }}</p>\r\n          </div>\r\n          <div class=\"column is-6\">\r\n            <p><strong>Estado:</strong> \r\n              <span class=\"tag is-success\">{{ cierreInfo.state === 'closed' ? 'Cerrado' : 'Abierto' }}</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Desglose detallado del efectivo -->\r\n      <div class=\"box mb-4\">\r\n        <h4 class=\"has-text-centered mb-4\">Desglose Detallado</h4>\r\n        \r\n        <div class=\"columns is-multiline\">\r\n          <div class=\"column is-8\">\r\n            <p><strong>Ventas realizadas por {{ userData.name }} en este turno:</strong></p>\r\n          </div>\r\n          <div class=\"column is-4 has-text-right\">\r\n            <p>{{ formatNumber(ventasTurno || cierreInfo.totalSales) }}</p>\r\n          </div>\r\n          <div class=\"column is-12\">\r\n            <div class=\"notification is-info is-light\">\r\n              <p>El efectivo esperado corresponde únicamente a las ventas realizadas por {{ userData.name }} en su turno.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"is-divider\"></div>\r\n        \r\n        <!-- Totales -->\r\n        <div class=\"columns is-multiline\">\r\n          <div class=\"column is-8\">\r\n            <p class=\"has-text-weight-bold\">EFECTIVO ESPERADO EN CAJA:</p>\r\n          </div>\r\n          <div class=\"column is-4 has-text-right\">\r\n            <p class=\"has-text-weight-bold\">{{ formatNumber(cierreInfo.expectedCash) }}</p>\r\n          </div>\r\n          <div class=\"column is-8\">\r\n            <p class=\"has-text-weight-bold\">EFECTIVO INGRESADO:</p>\r\n          </div>\r\n          <div class=\"column is-4 has-text-right\">\r\n            <p class=\"has-text-weight-bold\">{{ formatNumber(cierreInfo.cashInHand) }}</p>\r\n          </div>\r\n          <div class=\"column is-8\">\r\n            <p class=\"has-text-weight-bold\">DISCREPANCIA:</p>\r\n          </div>\r\n          <div class=\"column is-4 has-text-right\">\r\n            <p class=\"has-text-weight-bold\" :class=\"{'has-text-danger': cierreInfo.discrepancy < 0, 'has-text-success': cierreInfo.discrepancy > 0, 'has-text-info': cierreInfo.discrepancy === 0}\">\r\n              {{ formatNumber(cierreInfo.discrepancy) }}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Mensaje de discrepancia -->\r\n      <div v-if=\"cierreInfo.discrepancy !== 0\" class=\"notification\" :class=\"{'is-danger': cierreInfo.discrepancy < 0, 'is-warning': cierreInfo.discrepancy > 0}\">\r\n        <p class=\"has-text-centered\">\r\n          <span class=\"icon\">\r\n            <i class=\"mdi\" :class=\"{'mdi-alert': cierreInfo.discrepancy < 0, 'mdi-information': cierreInfo.discrepancy > 0}\"></i>\r\n          </span>\r\n          <span v-if=\"cierreInfo.discrepancy < 0\">\r\n            <strong>¡Atención!</strong> Hay una discrepancia negativa de {{ formatNumber(Math.abs(cierreInfo.discrepancy)) }}. \r\n            Esto significa que hay menos efectivo del esperado.\r\n          </span>\r\n          <span v-else>\r\n            <strong>¡Atención!</strong> Hay una discrepancia positiva de {{ formatNumber(cierreInfo.discrepancy) }}. \r\n            Esto significa que hay más efectivo del esperado.\r\n          </span>\r\n        </p>\r\n      </div>\r\n      \r\n      <div v-else class=\"notification is-success\">\r\n        <p class=\"has-text-centered\">\r\n          <span class=\"icon\">\r\n            <i class=\"mdi mdi-check-circle\"></i>\r\n          </span>\r\n          <strong>¡Excelente!</strong> No hay discrepancias. El efectivo ingresado coincide exactamente con el esperado.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </section>\r\n  <footer class=\"modal-card-foot\">\r\n    <button class=\"button is-success\" @click=\"cerrarModal\">Aceptar</button>\r\n  </footer>\r\n</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\nprops: {\r\ncierreInfo: Object,\r\nuserData: {\r\n  type: Object,\r\n  default: () => ({\r\n    name: '-',\r\n    username: '-',\r\n    phone: '-'\r\n  })\r\n},\r\nhayTurnoPrevio: {\r\n  type: Boolean,\r\n  default: false\r\n},\r\nesTurnoPrevioMismoUsuario: {\r\n  type: Boolean,\r\n  default: false\r\n},\r\nturnoPrevioInfo: {\r\n  type: Object,\r\n  default: () => ({})\r\n},\r\nventasTurno: {\r\n  type: Number,\r\n  default: 0\r\n}\r\n},\r\nmethods: {\r\nformatNumber(value) {\r\n  if (value === null || value === undefined) return '-';\r\n  return Number(value).toLocaleString('es-MX', { style: 'currency', currency: 'MXN' });\r\n},\r\nformatDate(dateString) {\r\n  if (!dateString) return '-';\r\n  const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };\r\n  return new Date(dateString).toLocaleDateString('es-MX', options);\r\n},\r\nformatHora(fechaString) {\r\n  if (!fechaString) return '-';\r\n  const fecha = new Date(fechaString);\r\n  return fecha.toLocaleTimeString('es-MX', { hour: '2-digit', minute: '2-digit' });\r\n},\r\ncerrarModal() {\r\n  console.log('Cerrando modal de resumen');\r\n  this.$emit('update:cierreInfo', null);\r\n}\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.modal-card {\r\nmax-width: 650px;\r\nwidth: 100%;\r\n}\r\n\r\n.modal-card-body {\r\npadding: 1.5rem;\r\n}\r\n\r\n.is-divider {\r\nheight: 1px;\r\nbackground-color: #dbdbdb;\r\nmargin: 1rem 0;\r\n}\r\n\r\n.mb-4 {\r\nmargin-bottom: 1rem;\r\n}\r\n\r\n@media print {\r\n.modal-background, .modal-card-head, .modal-card-foot {\r\ndisplay: none;\r\n}\r\n\r\n.modal {\r\nposition: relative;\r\ndisplay: block;\r\n}\r\n\r\n.modal-card {\r\nmax-width: 100%;\r\nmargin: 0;\r\nbox-shadow: none;\r\n}\r\n\r\n.modal-card-body {\r\npadding: 0;\r\n}\r\n}\r\n</style>\r\n\r\n"],"mappings":"AA4GA;EACAA,KAAA;IACAC,UAAA,EAAAC,MAAA;IACAC,QAAA;MACAC,IAAA,EAAAF,MAAA;MACAG,OAAA,EAAAA,CAAA;QACAC,IAAA;QACAC,QAAA;QACAC,KAAA;MACA;IACA;IACAC,cAAA;MACAL,IAAA,EAAAM,OAAA;MACAL,OAAA;IACA;IACAM,yBAAA;MACAP,IAAA,EAAAM,OAAA;MACAL,OAAA;IACA;IACAO,eAAA;MACAR,IAAA,EAAAF,MAAA;MACAG,OAAA,EAAAA,CAAA;IACA;IACAQ,WAAA;MACAT,IAAA,EAAAU,MAAA;MACAT,OAAA;IACA;EACA;EACAU,OAAA;IACAC,aAAAC,KAAA;MACA,IAAAA,KAAA,aAAAA,KAAA,KAAAC,SAAA;MACA,OAAAJ,MAAA,CAAAG,KAAA,EAAAE,cAAA;QAAAC,KAAA;QAAAC,QAAA;MAAA;IACA;IACAC,WAAAC,UAAA;MACA,KAAAA,UAAA;MACA,MAAAC,OAAA;QAAAC,IAAA;QAAAC,KAAA;QAAAC,GAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA;MACA,WAAAC,IAAA,CAAAP,UAAA,EAAAQ,kBAAA,UAAAP,OAAA;IACA;IACAQ,WAAAC,WAAA;MACA,KAAAA,WAAA;MACA,MAAAC,KAAA,OAAAJ,IAAA,CAAAG,WAAA;MACA,OAAAC,KAAA,CAAAC,kBAAA;QAAAP,IAAA;QAAAC,MAAA;MAAA;IACA;IACAO,YAAA;MACAC,OAAA,CAAAC,GAAA;MACA,KAAAC,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}