{"ast":null,"code":"import AyudanteSesion from '../../Servicios/AyudanteSesion';\nimport Utiles from '../../Servicios/Utiles';\nimport Printd from \"printd\";\nexport default {\n  name: \"ComprobanteCompra\",\n  props: [\"venta\", \"tipo\"],\n  data: () => ({\n    titulo: \"\",\n    datosNegocio: null,\n    cssText: `\n                .comprobante{\n                    width: 250px;\n                    font-family: monospace;\n                    font-size: 14px;\n                }\n\n                .comprobante > p{\n                    margin: 0!important;\n                    padding: 0!important;\n                    text-align: center;\n                }\n\n                .comprobante > img{\n                    display: block;\n                    margin: 0 auto;\n                }\n\n                .comprobante > th, td {\n                  border-bottom: 1px solid #ddd;\n                  font-size: 12px !important;\n                  margin: 0!important;\n                  padding: 0!important;\n                }\n\n                .centered-table {\n                    margin-left: auto;\n                    margin-right: auto;\n                }\n                    @media print {\n    body {\n        visibility: hidden;\n    }\n    .comprobante {\n        visibility: visible;\n    }\n}\n        \n\n            `\n  }),\n  beforeMount() {\n    this.generarTitulo();\n    this.obtenerDatosNegocio();\n  },\n  mounted() {\n    this.d = new Printd();\n    const {\n      contentWindow\n    } = this.d.getIFrame();\n    contentWindow.addEventListener(\"beforeprint\", () => console.log(\"before print event!\"));\n    contentWindow.addEventListener(\"afterprint\", () => console.log(\"after print event!\"));\n    this.imprimir();\n  },\n  methods: {\n    generarTitulo() {\n      switch (this.tipo) {\n        case \"venta\":\n          this.titulo = \"COMPROBANTE DE COMPRA\";\n          break;\n        case \"cuenta\":\n          this.titulo = \"COMPROBANTE DE CUENTA\";\n          break;\n        case \"apartado\":\n          this.titulo = \"COMPROBANTE DE APARTADO\";\n          break;\n        case \"cotiza\":\n          this.titulo = \"COTIZACIÓN\";\n          break;\n        default:\n          this.titulo = \"COMPROBANTE\";\n      }\n    },\n    obtenerDatosNegocio() {\n      this.datosNegocio = AyudanteSesion.obtenerDatosNegocio();\n      this.datosNegocio.logo = Utiles.regresarRuta() + this.datosNegocio.logo;\n    },\n    imprimir() {\n      // Ocultar la fecha antes de imprimir\n      const fechaElement = document.querySelector('.comprobante p:nth-child(4)'); // Ajusta este selector según la estructura\n      if (fechaElement) {\n        fechaElement.style.display = 'none'; // Oculta el elemento de la fecha\n      }\n\n      // Espera un breve momento para asegurarte de que el estilo se haya aplicado\n      setTimeout(() => {\n        let zona = document.getElementById(\"comprobante\");\n\n        // Imprime el contenido\n        this.d.print(zona, [this.cssText]);\n\n        // Restaurar el elemento de la fecha después de la impresión\n        if (fechaElement) {\n          fechaElement.style.display = ''; // Restaura la visibilidad\n        }\n        this.$emit(\"impreso\", false);\n      }, 10);\n    }\n  }\n};","map":{"version":3,"names":["AyudanteSesion","Utiles","Printd","name","props","data","titulo","datosNegocio","cssText","beforeMount","generarTitulo","obtenerDatosNegocio","mounted","d","contentWindow","getIFrame","addEventListener","console","log","imprimir","methods","tipo","logo","regresarRuta","fechaElement","document","querySelector","style","display","setTimeout","zona","getElementById","print","$emit"],"sources":["src/components/Ventas/ComprobanteCompra.vue"],"sourcesContent":["<template>\r\n    <section>\r\n        <div class=\"comprobante\" id=\"comprobante\" v-if=\"datosNegocio\">\r\n            <p><b>{{ titulo }}</b></p>\r\n            <p>Tienda el Divino Niño</p>\r\n\r\n            <p><b>Cliente: </b>{{ venta.nombreCliente }}</p>\r\n            <p><b>Cajero: </b>{{ venta.nombreUsuario }}</p>\r\n            <p><b>Fecha: </b>{{ venta.fecha }}</p>\r\n            <table class=\"centered-table\">\r\n                <thead>\r\n                    <th class=\"fixed-size\">Producto</th>\r\n                    <th class=\"fixed-size\">Cant.</th>\r\n                    <th class=\"fixed-size\">Precio</th>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(producto, index) in venta.products\" :key=\"index\">\r\n                        <td class=\"truncate fixed-size\">{{ producto.nombre }}</td>\r\n                        <td class=\"fixed-size\">{{ producto.cantidad }}</td>\r\n                        <td class=\"fixed-size\">${{ producto.precio }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <p><b>Total:</b>${{ Number(venta.total).toFixed(2) }}</p>\r\n            <p v-if=\"tipo !== 'cotiza'\"><b>Su pago:</b>${{ Number(venta.pagado).toFixed(2) }}</p>\r\n            <p v-if=\"tipo === 'venta'\"><b>Cambio:</b>${{ (Number(venta.pagado) - Number(venta.total)).toFixed(2) }}</p>\r\n            <p v-if=\"tipo === 'cuenta' || tipo === 'apartado'\"><b>Por pagar:</b>${{ Number(venta.porPagar).toFixed(2) }}\r\n            </p>\r\n            <p><b>Gracias por su preferencia</b></p>\r\n            <p>----------------------------</p>\r\n            <p>Sistema de ventas implementado por:</p>\r\n            <p><b>codemark.es</b></p>\r\n        </div>\r\n    </section>\r\n</template>\r\n<script>\r\nimport AyudanteSesion from '../../Servicios/AyudanteSesion'\r\nimport Utiles from '../../Servicios/Utiles'\r\nimport Printd from \"printd\";\r\n\r\nexport default {\r\n    name: \"ComprobanteCompra\",\r\n    props: [\"venta\", \"tipo\"],\r\n\r\n    data: () => ({\r\n        titulo: \"\",\r\n        datosNegocio: null,\r\n        cssText: `\r\n                .comprobante{\r\n                    width: 250px;\r\n                    font-family: monospace;\r\n                    font-size: 14px;\r\n                }\r\n\r\n                .comprobante > p{\r\n                    margin: 0!important;\r\n                    padding: 0!important;\r\n                    text-align: center;\r\n                }\r\n\r\n                .comprobante > img{\r\n                    display: block;\r\n                    margin: 0 auto;\r\n                }\r\n\r\n                .comprobante > th, td {\r\n                  border-bottom: 1px solid #ddd;\r\n                  font-size: 12px !important;\r\n                  margin: 0!important;\r\n                  padding: 0!important;\r\n                }\r\n\r\n                .centered-table {\r\n                    margin-left: auto;\r\n                    margin-right: auto;\r\n                }\r\n                    @media print {\r\n    body {\r\n        visibility: hidden;\r\n    }\r\n    .comprobante {\r\n        visibility: visible;\r\n    }\r\n}\r\n        \r\n\r\n            `,\r\n\r\n    }),\r\n\r\n    beforeMount() {\r\n        this.generarTitulo()\r\n        this.obtenerDatosNegocio()\r\n    },\r\n\r\n    mounted() {\r\n\r\n\r\n        this.d = new Printd();\r\n        const { contentWindow } = this.d.getIFrame();\r\n        contentWindow.addEventListener(\"beforeprint\", () =>\r\n            console.log(\"before print event!\")\r\n        );\r\n        contentWindow.addEventListener(\"afterprint\", () =>\r\n            console.log(\"after print event!\")\r\n        );\r\n\r\n        this.imprimir();\r\n    },\r\n\r\n    methods: {\r\n        generarTitulo() {\r\n            switch (this.tipo) {\r\n                case \"venta\":\r\n                    this.titulo = \"COMPROBANTE DE COMPRA\"\r\n                    break\r\n                case \"cuenta\":\r\n                    this.titulo = \"COMPROBANTE DE CUENTA\"\r\n                    break\r\n\r\n                case \"apartado\":\r\n                    this.titulo = \"COMPROBANTE DE APARTADO\"\r\n                    break\r\n\r\n                case \"cotiza\":\r\n                    this.titulo = \"COTIZACIÓN\"\r\n                    break\r\n\r\n                default:\r\n                    this.titulo = \"COMPROBANTE\"\r\n            }\r\n        },\r\n\r\n        obtenerDatosNegocio() {\r\n            this.datosNegocio = AyudanteSesion.obtenerDatosNegocio()\r\n            this.datosNegocio.logo = Utiles.regresarRuta() + this.datosNegocio.logo\r\n        },\r\n\r\n        imprimir() {\r\n        // Ocultar la fecha antes de imprimir\r\n        const fechaElement = document.querySelector('.comprobante p:nth-child(4)'); // Ajusta este selector según la estructura\r\n        if (fechaElement) {\r\n            fechaElement.style.display = 'none'; // Oculta el elemento de la fecha\r\n        }\r\n\r\n        // Espera un breve momento para asegurarte de que el estilo se haya aplicado\r\n        setTimeout(() => {\r\n            let zona = document.getElementById(\"comprobante\");\r\n\r\n            // Imprime el contenido\r\n            this.d.print(zona, [this.cssText]);\r\n\r\n            // Restaurar el elemento de la fecha después de la impresión\r\n            if (fechaElement) {\r\n                fechaElement.style.display = ''; // Restaura la visibilidad\r\n            }\r\n\r\n            this.$emit(\"impreso\", false);\r\n        }, 10);\r\n    },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.comprobante {\r\n    width: 250px;\r\n    font-family: monospace;\r\n    font-size: 14px;\r\n}\r\n\r\n.comprobante>p {\r\n    margin: 0 !important;\r\n    padding: 0 !important;\r\n    text-align: center;\r\n}\r\n\r\n.comprobante>img {\r\n    display: block;\r\n    margin: 0 auto;\r\n}\r\n\r\n.comprobante>th,\r\ntd {\r\n    border-bottom: 1px solid #ddd;\r\n    font-size: 12px !important;\r\n    margin: 0 !important;\r\n    padding: 0 !important;\r\n}\r\n\r\n.centered-table {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n}\r\n\r\n.truncate {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.fixed-width {\r\n    max-width: 80px;\r\n    width: 80px;\r\n}\r\n\r\n.fixed-size {\r\n    max-width: 80px;\r\n    width: 80px;\r\n    max-height: 20px;\r\n    height: 20px;\r\n}\r\n@media print {\r\n    body {\r\n        visibility: hidden;\r\n    }\r\n    .comprobante {\r\n        visibility: visible;\r\n    }\r\n}\r\n</style>"],"mappings":"AAoCA,OAAAA,cAAA;AACA,OAAAC,MAAA;AACA,OAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,KAAA;EAEAC,IAAA,EAAAA,CAAA;IACAC,MAAA;IACAC,YAAA;IACAC,OAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;EAEA;EAEAC,YAAA;IACA,KAAAC,aAAA;IACA,KAAAC,mBAAA;EACA;EAEAC,QAAA;IAGA,KAAAC,CAAA,OAAAX,MAAA;IACA;MAAAY;IAAA,SAAAD,CAAA,CAAAE,SAAA;IACAD,aAAA,CAAAE,gBAAA,sBACAC,OAAA,CAAAC,GAAA,uBACA;IACAJ,aAAA,CAAAE,gBAAA,qBACAC,OAAA,CAAAC,GAAA,sBACA;IAEA,KAAAC,QAAA;EACA;EAEAC,OAAA;IACAV,cAAA;MACA,aAAAW,IAAA;QACA;UACA,KAAAf,MAAA;UACA;QACA;UACA,KAAAA,MAAA;UACA;QAEA;UACA,KAAAA,MAAA;UACA;QAEA;UACA,KAAAA,MAAA;UACA;QAEA;UACA,KAAAA,MAAA;MACA;IACA;IAEAK,oBAAA;MACA,KAAAJ,YAAA,GAAAP,cAAA,CAAAW,mBAAA;MACA,KAAAJ,YAAA,CAAAe,IAAA,GAAArB,MAAA,CAAAsB,YAAA,UAAAhB,YAAA,CAAAe,IAAA;IACA;IAEAH,SAAA;MACA;MACA,MAAAK,YAAA,GAAAC,QAAA,CAAAC,aAAA;MACA,IAAAF,YAAA;QACAA,YAAA,CAAAG,KAAA,CAAAC,OAAA;MACA;;MAEA;MACAC,UAAA;QACA,IAAAC,IAAA,GAAAL,QAAA,CAAAM,cAAA;;QAEA;QACA,KAAAlB,CAAA,CAAAmB,KAAA,CAAAF,IAAA,QAAAtB,OAAA;;QAEA;QACA,IAAAgB,YAAA;UACAA,YAAA,CAAAG,KAAA,CAAAC,OAAA;QACA;QAEA,KAAAK,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}