{"ast":null,"code":"export default {\n  props: {\n    titulo: String,\n    proveedor: Object\n  },\n  data() {\n    return {\n      proveedorLocal: {\n        name: \"\",\n        taxId: \"\",\n        address: \"\",\n        phone: \"\",\n        ...this.proveedor\n      },\n      nitError: false,\n      telefonoError: false\n    };\n  },\n  computed: {\n    nitPattern() {\n      return /^\\d{4}-\\d{6}-\\d{3}-\\d{1}$/;\n    },\n    telefonoPattern() {\n      return /^\\d{4}-\\d{4}$/;\n    }\n  },\n  watch: {\n    'proveedorLocal.taxId'(newVal) {\n      this.formatearNIT(newVal);\n    },\n    'proveedorLocal.phone'(newVal) {\n      this.formatearTelefono(newVal);\n    }\n  },\n  mounted() {\n    if (this.proveedor?.taxId) {\n      this.formatearNIT(this.proveedor.taxId);\n    }\n    if (this.proveedor?.phone) {\n      this.formatearTelefono(this.proveedor.phone);\n    }\n  },\n  methods: {\n    formatearNIT(valor) {\n      const nitLimpio = valor.replace(/[^\\d]/g, '').substring(0, 14);\n      let formatted = '';\n\n      // Formato NIT: 0000-000000-000-0\n      for (let i = 0; i < nitLimpio.length; i++) {\n        if ([4, 10, 13].includes(i)) formatted += '-';\n        formatted += nitLimpio[i];\n      }\n      this.proveedorLocal.taxId = formatted.substring(0, 17);\n      this.validarNIT();\n    },\n    formatearTelefono(valor) {\n      const telefonoLimpio = valor.replace(/[^\\d]/g, '').substring(0, 8);\n      let formatted = '';\n\n      // Formato Teléfono: 0000-0000\n      for (let i = 0; i < telefonoLimpio.length; i++) {\n        if (i === 4) formatted += '-';\n        formatted += telefonoLimpio[i];\n      }\n      this.proveedorLocal.phone = formatted.substring(0, 9);\n      this.validarTelefono();\n    },\n    validarNIT() {\n      this.nitError = !this.nitPattern.test(this.proveedorLocal.taxId);\n    },\n    validarTelefono() {\n      this.telefonoError = !this.telefonoPattern.test(this.proveedorLocal.phone);\n    },\n    guardar() {\n      if (this.validarCampos()) {\n        this.$emit('registrar', this.proveedorLocal);\n      }\n    },\n    validarCampos() {\n      const camposRequeridos = ['name', 'taxId', 'address', 'phone'];\n\n      // Validar campos vacíos\n      for (const campo of camposRequeridos) {\n        if (!this.proveedorLocal[campo]?.trim()) {\n          this.mostrarError(`El campo ${campo} es requerido`);\n          return false;\n        }\n      }\n\n      // Validar formato NIT\n      if (!this.nitPattern.test(this.proveedorLocal.taxId)) {\n        this.mostrarError('Formato de NIT inválido. Use: 0000-000000-000-0');\n        return false;\n      }\n\n      // Validar formato Teléfono\n      if (!this.telefonoPattern.test(this.proveedorLocal.phone)) {\n        this.mostrarError('Formato de teléfono inválido. Use: 0000-0000');\n        return false;\n      }\n      return true;\n    },\n    mostrarError(mensaje) {\n      this.$buefy.toast.open({\n        type: 'is-danger',\n        message: mensaje,\n        duration: 3000\n      });\n    }\n  }\n};","map":{"version":3,"names":["props","titulo","String","proveedor","Object","data","proveedorLocal","name","taxId","address","phone","nitError","telefonoError","computed","nitPattern","telefonoPattern","watch","proveedorLocal.taxId","newVal","formatearNIT","proveedorLocal.phone","formatearTelefono","mounted","methods","valor","nitLimpio","replace","substring","formatted","i","length","includes","validarNIT","telefonoLimpio","validarTelefono","test","guardar","validarCampos","$emit","camposRequeridos","campo","trim","mostrarError","mensaje","$buefy","toast","open","type","message","duration"],"sources":["src/components/MarcasCategoriasProveedores/DialogoProveedores.vue"],"sourcesContent":["<template>\r\n    <div class=\"modal-card\">\r\n      <header class=\"modal-card-head\">\r\n        <p class=\"modal-card-title\">{{ titulo }} Proveedor</p>\r\n        <b-button icon-left=\"close\" @click=\"$emit('close')\" />\r\n      </header>\r\n  \r\n      <section class=\"modal-card-body\">\r\n        <b-field label=\"Nombre\" label-position=\"on-border\">\r\n          <b-input v-model=\"proveedorLocal.name\" required></b-input>\r\n        </b-field>\r\n  \r\n        <b-field \r\n        label=\"NIT\" \r\n        label-position=\"on-border\"\r\n        :type=\"nitError ? 'is-danger' : ''\"\r\n        :message=\"nitError ? 'Formato requerido: 0000-000000-000-0' : ''\"\r\n        >\r\n          <b-input \r\n          v-model=\"proveedorLocal.taxId\" \r\n          placeholder=\"0000-000000-000-0\"\r\n          maxlength=\"17\"\r\n          @blur=\"validarNIT\"\r\n          required></b-input>\r\n        </b-field>\r\n  \r\n        <b-field label=\"Dirección\" label-position=\"on-border\">\r\n          <b-input v-model=\"proveedorLocal.address\" required></b-input>\r\n        </b-field>\r\n  \r\n        <b-field \r\n        label=\"Teléfono\" \r\n        label-position=\"on-border\"\r\n        :type=\"telefonoError ? 'is-danger' : ''\"\r\n        :message=\"telefonoError ? 'Formato requerido: 0000-0000' : ''\"\r\n        >\r\n          <b-input \r\n          v-model=\"proveedorLocal.phone\" \r\n          placeholder=\"0000-0000\"\r\n          maxlength=\"9\"\r\n          @blur=\"validarTelefono\"\r\n          required></b-input>\r\n        </b-field>\r\n      </section>\r\n  \r\n      <footer class=\"modal-card-foot is-justify-content-flex-end\">\r\n        <b-button @click=\"$emit('close')\">Cancelar</b-button>\r\n        <b-button type=\"is-primary\" @click=\"guardar\">Guardar</b-button>\r\n      </footer>\r\n    </div>\r\n  </template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    titulo: String,\r\n    proveedor: Object\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      proveedorLocal: {\r\n        name: \"\",\r\n        taxId: \"\",\r\n        address: \"\",\r\n        phone: \"\",\r\n        ...this.proveedor\r\n      },\r\n      nitError: false,\r\n      telefonoError: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    nitPattern() {\r\n      return /^\\d{4}-\\d{6}-\\d{3}-\\d{1}$/\r\n    },\r\n    telefonoPattern() {\r\n      return /^\\d{4}-\\d{4}$/\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    'proveedorLocal.taxId'(newVal) {\r\n      this.formatearNIT(newVal)\r\n    },\r\n    'proveedorLocal.phone'(newVal) {\r\n      this.formatearTelefono(newVal)\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    if (this.proveedor?.taxId) {\r\n      this.formatearNIT(this.proveedor.taxId)\r\n    }\r\n    if (this.proveedor?.phone) {\r\n      this.formatearTelefono(this.proveedor.phone)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    formatearNIT(valor) {\r\n      const nitLimpio = valor.replace(/[^\\d]/g, '').substring(0, 14)\r\n      let formatted = ''\r\n      \r\n      // Formato NIT: 0000-000000-000-0\r\n      for (let i = 0; i < nitLimpio.length; i++) {\r\n        if ([4, 10, 13].includes(i)) formatted += '-'\r\n        formatted += nitLimpio[i]\r\n      }\r\n\r\n      this.proveedorLocal.taxId = formatted.substring(0, 17)\r\n      this.validarNIT()\r\n    },\r\n\r\n    formatearTelefono(valor) {\r\n      const telefonoLimpio = valor.replace(/[^\\d]/g, '').substring(0, 8)\r\n      let formatted = ''\r\n      \r\n      // Formato Teléfono: 0000-0000\r\n      for (let i = 0; i < telefonoLimpio.length; i++) {\r\n        if (i === 4) formatted += '-'\r\n        formatted += telefonoLimpio[i]\r\n      }\r\n\r\n      this.proveedorLocal.phone = formatted.substring(0, 9)\r\n      this.validarTelefono()\r\n    },\r\n\r\n    validarNIT() {\r\n      this.nitError = !this.nitPattern.test(this.proveedorLocal.taxId)\r\n    },\r\n\r\n    validarTelefono() {\r\n      this.telefonoError = !this.telefonoPattern.test(this.proveedorLocal.phone)\r\n    },\r\n\r\n    guardar() {\r\n      if (this.validarCampos()) {\r\n        this.$emit('registrar', this.proveedorLocal)\r\n      }\r\n    },\r\n\r\n    validarCampos() {\r\n      const camposRequeridos = ['name', 'taxId', 'address', 'phone']\r\n      \r\n      // Validar campos vacíos\r\n      for (const campo of camposRequeridos) {\r\n        if (!this.proveedorLocal[campo]?.trim()) {\r\n          this.mostrarError(`El campo ${campo} es requerido`)\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Validar formato NIT\r\n      if (!this.nitPattern.test(this.proveedorLocal.taxId)) {\r\n        this.mostrarError('Formato de NIT inválido. Use: 0000-000000-000-0')\r\n        return false\r\n      }\r\n\r\n      // Validar formato Teléfono\r\n      if (!this.telefonoPattern.test(this.proveedorLocal.phone)) {\r\n        this.mostrarError('Formato de teléfono inválido. Use: 0000-0000')\r\n        return false\r\n      }\r\n\r\n      return true\r\n    },\r\n\r\n    mostrarError(mensaje) {\r\n      this.$buefy.toast.open({\r\n        type: 'is-danger',\r\n        message: mensaje,\r\n        duration: 3000\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":"AAqDA;EACAA,KAAA;IACAC,MAAA,EAAAC,MAAA;IACAC,SAAA,EAAAC;EACA;EAEAC,KAAA;IACA;MACAC,cAAA;QACAC,IAAA;QACAC,KAAA;QACAC,OAAA;QACAC,KAAA;QACA,QAAAP;MACA;MACAQ,QAAA;MACAC,aAAA;IACA;EACA;EAEAC,QAAA;IACAC,WAAA;MACA;IACA;IACAC,gBAAA;MACA;IACA;EACA;EAEAC,KAAA;IACA,sBAAAC,CAAAC,MAAA;MACA,KAAAC,YAAA,CAAAD,MAAA;IACA;IACA,sBAAAE,CAAAF,MAAA;MACA,KAAAG,iBAAA,CAAAH,MAAA;IACA;EACA;EAEAI,QAAA;IACA,SAAAnB,SAAA,EAAAK,KAAA;MACA,KAAAW,YAAA,MAAAhB,SAAA,CAAAK,KAAA;IACA;IACA,SAAAL,SAAA,EAAAO,KAAA;MACA,KAAAW,iBAAA,MAAAlB,SAAA,CAAAO,KAAA;IACA;EACA;EAEAa,OAAA;IACAJ,aAAAK,KAAA;MACA,MAAAC,SAAA,GAAAD,KAAA,CAAAE,OAAA,eAAAC,SAAA;MACA,IAAAC,SAAA;;MAEA;MACA,SAAAC,CAAA,MAAAA,CAAA,GAAAJ,SAAA,CAAAK,MAAA,EAAAD,CAAA;QACA,gBAAAE,QAAA,CAAAF,CAAA,GAAAD,SAAA;QACAA,SAAA,IAAAH,SAAA,CAAAI,CAAA;MACA;MAEA,KAAAvB,cAAA,CAAAE,KAAA,GAAAoB,SAAA,CAAAD,SAAA;MACA,KAAAK,UAAA;IACA;IAEAX,kBAAAG,KAAA;MACA,MAAAS,cAAA,GAAAT,KAAA,CAAAE,OAAA,eAAAC,SAAA;MACA,IAAAC,SAAA;;MAEA;MACA,SAAAC,CAAA,MAAAA,CAAA,GAAAI,cAAA,CAAAH,MAAA,EAAAD,CAAA;QACA,IAAAA,CAAA,QAAAD,SAAA;QACAA,SAAA,IAAAK,cAAA,CAAAJ,CAAA;MACA;MAEA,KAAAvB,cAAA,CAAAI,KAAA,GAAAkB,SAAA,CAAAD,SAAA;MACA,KAAAO,eAAA;IACA;IAEAF,WAAA;MACA,KAAArB,QAAA,SAAAG,UAAA,CAAAqB,IAAA,MAAA7B,cAAA,CAAAE,KAAA;IACA;IAEA0B,gBAAA;MACA,KAAAtB,aAAA,SAAAG,eAAA,CAAAoB,IAAA,MAAA7B,cAAA,CAAAI,KAAA;IACA;IAEA0B,QAAA;MACA,SAAAC,aAAA;QACA,KAAAC,KAAA,mBAAAhC,cAAA;MACA;IACA;IAEA+B,cAAA;MACA,MAAAE,gBAAA;;MAEA;MACA,WAAAC,KAAA,IAAAD,gBAAA;QACA,UAAAjC,cAAA,CAAAkC,KAAA,GAAAC,IAAA;UACA,KAAAC,YAAA,aAAAF,KAAA;UACA;QACA;MACA;;MAEA;MACA,UAAA1B,UAAA,CAAAqB,IAAA,MAAA7B,cAAA,CAAAE,KAAA;QACA,KAAAkC,YAAA;QACA;MACA;;MAEA;MACA,UAAA3B,eAAA,CAAAoB,IAAA,MAAA7B,cAAA,CAAAI,KAAA;QACA,KAAAgC,YAAA;QACA;MACA;MAEA;IACA;IAEAA,aAAAC,OAAA;MACA,KAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA;QACAC,IAAA;QACAC,OAAA,EAAAL,OAAA;QACAM,QAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}